<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PandaSIM 2</title>

<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background-color: #eaf7ea;
    margin: 0;
    padding: 20px;
  }

  #gameText {
    font-size: 18px;
    margin: 20px;
    min-height: 160px;
  }

  #sceneImage {
    width: 90%;
    max-width: 500px;
    height: auto;
    border-radius: 10px;
    border: 2px solid #333;
    margin: 10px auto;
    display: block;
  }

  #buttons button {
    padding: 10px 20px;
    margin: 6px;
    font-size: 16px;
    cursor: pointer;
  }
</style>
</head>

<body>

<h1>PandaSIM 2</h1>

<img id="sceneImage" src="forest.jpg" alt="Scene Image">

<div id="gameText">Loading story...</div>
<div id="buttons"></div>

<script defer>
const textBox = document.getElementById("gameText");
const buttonBox = document.getElementById("buttons");
const imageBox = document.getElementById("sceneImage");

function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function setText(text) {
  textBox.textContent = text;
}

function setImage(img) {
  imageBox.src = img;
}

function setButtons(buttons) {
  buttonBox.innerHTML = "";
  buttons.forEach(b => {
    const btn = document.createElement("button");
    btn.textContent = b.text;
    btn.onclick = b.action;
    buttonBox.appendChild(btn);
  });
}

let mother = "";
let father = "";

async function startGame() {
  mother = prompt("What is your mother's name?");
  father = prompt("What is your father's name?");

  setImage("forest.jpg");
  setText("Long before you were born...");
  await sleep(2500);

  setText(`${mother} and ${father} lived peacefully in the bamboo forest.`);
  await sleep(3000);

  setText("They spent their days eating bamboo and watching the sunrise.");
  await sleep(3000);

  setText("One morning, the forest grew silent.");
  await sleep(2500);

  zooAlert();
}

function zooAlert() {
  setImage("zookeeper.jpg");
  setText("Zoo keepers have entered the forest.");
  setButtons([
    { text: "Hide in the bamboo", action: hideBamboo },
    { text: "Run deeper into the forest", action: deepForest }
  ]);
}

async function hideBamboo() {
  setButtons([]);
  setImage("bamboo.jpg");
  setText("They hide quietly among the bamboo.");
  await sleep(3000);

  setText("Dogs bark nearby.");
  await sleep(3000);

  captureTruck();
}

async function deepForest() {
  setButtons([]);
  setImage("forest.jpg");
  setText("They run deeper into the forest.");
  await sleep(3000);

  riverApproach();
}

function riverApproach() {
  setImage("river.jpg");
  setText("A wide river blocks their path.");
  setButtons([
    { text: "Swim across together", action: swimRiver },
    { text: "Follow the river", action: riverWalk }
  ]);
}

async function swimRiver() {
  setButtons([]);
  setText("They swim together against the current.");
  await sleep(3000);

  setText("They reach the other side safely.");
  await sleep(3000);

  mountainTrail();
}

async function riverWalk() {
  setButtons([]);
  setText("They follow the river and cross on a fallen tree.");
  await sleep(3000);

  mountainTrail();
}

async function mountainTrail() {
  setImage("mountains.jpg");
  setText("Mountains rise ahead as night falls.");
  await sleep(3000);

  mountainChoice();
}

function mountainChoice() {
  setButtons([
    { text: "Enter a cave", action: caveScene },
    { text: "Climb higher", action: snowClimb }
  ]);
}

async function caveScene() {
  setButtons([]);
  setImage("cave.jpg");
  setText("They hide inside a cave as lights pass outside.");
  await sleep(3000);

  escapeEnding();
}

async function snowClimb() {
  setButtons([]);
  setImage("snowstorm.jpg");
  setText("A snowstorm slows them down.");
  await sleep(3000);

  escapeEnding();
}

async function captureTruck() {
  setImage("truck.jpg");
  setText("They are captured and loaded into a truck.");
  await sleep(3000);

  setText("At night, the cage door is left open.");
  await sleep(3000);

  escapeEnding();
}

async function escapeEnding() {
  setImage("freedom.jpg");
  setText("They escape and travel far away from humans.");
  await sleep(3000);

  setImage("baby_panda.jpg");
  setText("Years later, you are born â€” safe and free.");
  setButtons([]);
}

startGame();
</script>

</body>
</html>
